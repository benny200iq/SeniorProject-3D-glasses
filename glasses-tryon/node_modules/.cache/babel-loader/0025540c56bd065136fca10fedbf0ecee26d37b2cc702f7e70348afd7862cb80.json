{"ast":null,"code":"var _jsxFileName = \"W:\\\\project\\\\glasses-tryon\\\\src\\\\FaceTracking.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FaceTracking = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const faceMesh = new FaceMesh({\n      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`\n    });\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    faceMesh.onResults(onResults);\n    if (videoRef.current) {\n      const camera = new Camera(videoRef.current, {\n        onFrame: async () => {\n          await faceMesh.send({\n            image: videoRef.current\n          });\n        },\n        width: 640,\n        height: 480\n      });\n      camera.start();\n    }\n  }, []);\n  const onResults = results => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw the video feed\n    ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);\n    if (results.multiFaceLandmarks) {\n      for (const landmarks of results.multiFaceLandmarks) {\n        // Bounding Box Calculation\n        const xs = landmarks.map(lm => lm.x * canvas.width);\n        const ys = landmarks.map(lm => lm.y * canvas.height);\n        const xMin = Math.min(...xs);\n        const xMax = Math.max(...xs);\n        const yMin = Math.min(...ys);\n        const yMax = Math.max(...ys);\n\n        // Draw Bounding Box\n        ctx.beginPath();\n        ctx.strokeStyle = \"lime\";\n        ctx.lineWidth = 3;\n        ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\n        ctx.stroke();\n\n        // Identify Face Shape\n        const faceShape = detectFaceShape(landmarks);\n        ctx.fillStyle = \"red\";\n        ctx.font = \"16px Arial\";\n        ctx.fillText(`Face Shape: ${faceShape}`, xMin, yMin - 10);\n      }\n    }\n  };\n  const detectFaceShape = landmarks => {\n    const chin = landmarks[152];\n    const leftCheek = landmarks[234];\n    const rightCheek = landmarks[454];\n    const forehead = landmarks[10];\n    const width = Math.abs(rightCheek.x - leftCheek.x);\n    const height = Math.abs(chin.y - forehead.y);\n    if (width / height > 1.3) return \"Round\";else if (width / height < 0.9) return \"Oval\";else return \"Square\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: styles.title,\n      children: \"Face Tracking with Face Shape\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.videoContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        style: {\n          display: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: \"640\",\n        height: \"480\",\n        style: styles.canvas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(FaceTracking, \"0gwqVvoOV2or9Ql4L8GH2BGn3hc=\");\n_c = FaceTracking;\nconst styles = {\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"100vh\",\n    backgroundColor: \"#f4f4f4\"\n  },\n  title: {\n    marginBottom: \"20px\",\n    fontFamily: \"Arial, sans-serif\",\n    fontSize: \"24px\",\n    color: \"#333\"\n  },\n  videoContainer: {\n    position: \"relative\"\n  },\n  canvas: {\n    border: \"2px solid #000\",\n    borderRadius: \"8px\"\n  }\n};\nexport default FaceTracking;\nvar _c;\n$RefreshReg$(_c, \"FaceTracking\");","map":{"version":3,"names":["React","useEffect","useRef","FaceMesh","Camera","jsxDEV","_jsxDEV","FaceTracking","_s","videoRef","canvasRef","faceMesh","locateFile","file","setOptions","maxNumFaces","refineLandmarks","minDetectionConfidence","minTrackingConfidence","onResults","current","camera","onFrame","send","image","width","height","start","results","canvas","ctx","getContext","clearRect","drawImage","multiFaceLandmarks","landmarks","xs","map","lm","x","ys","y","xMin","Math","min","xMax","max","yMin","yMax","beginPath","strokeStyle","lineWidth","rect","stroke","faceShape","detectFaceShape","fillStyle","font","fillText","chin","leftCheek","rightCheek","forehead","abs","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","videoContainer","ref","display","_c","flexDirection","alignItems","justifyContent","backgroundColor","marginBottom","fontFamily","fontSize","color","position","border","borderRadius","$RefreshReg$"],"sources":["W:/project/glasses-tryon/src/FaceTracking.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport { FaceMesh } from \"@mediapipe/face_mesh\";\r\nimport { Camera } from \"@mediapipe/camera_utils\";\r\n\r\nconst FaceTracking = () => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const faceMesh = new FaceMesh({\r\n      locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`,\r\n    });\r\n\r\n    faceMesh.setOptions({\r\n      maxNumFaces: 1,\r\n      refineLandmarks: true,\r\n      minDetectionConfidence: 0.5,\r\n      minTrackingConfidence: 0.5,\r\n    });\r\n\r\n    faceMesh.onResults(onResults);\r\n\r\n    if (videoRef.current) {\r\n      const camera = new Camera(videoRef.current, {\r\n        onFrame: async () => {\r\n          await faceMesh.send({ image: videoRef.current });\r\n        },\r\n        width: 640,\r\n        height: 480,\r\n      });\r\n      camera.start();\r\n    }\r\n  }, []);\r\n\r\n  const onResults = (results) => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Draw the video feed\r\n    ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);\r\n\r\n    if (results.multiFaceLandmarks) {\r\n      for (const landmarks of results.multiFaceLandmarks) {\r\n        // Bounding Box Calculation\r\n        const xs = landmarks.map((lm) => lm.x * canvas.width);\r\n        const ys = landmarks.map((lm) => lm.y * canvas.height);\r\n        const xMin = Math.min(...xs);\r\n        const xMax = Math.max(...xs);\r\n        const yMin = Math.min(...ys);\r\n        const yMax = Math.max(...ys);\r\n\r\n        // Draw Bounding Box\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = \"lime\";\r\n        ctx.lineWidth = 3;\r\n        ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\r\n        ctx.stroke();\r\n\r\n        // Identify Face Shape\r\n        const faceShape = detectFaceShape(landmarks);\r\n        ctx.fillStyle = \"red\";\r\n        ctx.font = \"16px Arial\";\r\n        ctx.fillText(`Face Shape: ${faceShape}`, xMin, yMin - 10);\r\n      }\r\n    }\r\n  };\r\n\r\n  const detectFaceShape = (landmarks) => {\r\n    const chin = landmarks[152];\r\n    const leftCheek = landmarks[234];\r\n    const rightCheek = landmarks[454];\r\n    const forehead = landmarks[10];\r\n\r\n    const width = Math.abs(rightCheek.x - leftCheek.x);\r\n    const height = Math.abs(chin.y - forehead.y);\r\n\r\n    if (width / height > 1.3) return \"Round\";\r\n    else if (width / height < 0.9) return \"Oval\";\r\n    else return \"Square\";\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1 style={styles.title}>Face Tracking with Face Shape</h1>\r\n      <div style={styles.videoContainer}>\r\n        <video ref={videoRef} style={{ display: \"none\" }}></video>\r\n        <canvas ref={canvasRef} width=\"640\" height=\"480\" style={styles.canvas}></canvas>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: \"100vh\",\r\n    backgroundColor: \"#f4f4f4\",\r\n  },\r\n  title: {\r\n    marginBottom: \"20px\",\r\n    fontFamily: \"Arial, sans-serif\",\r\n    fontSize: \"24px\",\r\n    color: \"#333\",\r\n  },\r\n  videoContainer: {\r\n    position: \"relative\",\r\n  },\r\n  canvas: {\r\n    border: \"2px solid #000\",\r\n    borderRadius: \"8px\",\r\n  },\r\n};\r\n\r\nexport default FaceTracking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}